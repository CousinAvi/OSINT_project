{% extends 'base.html' %}
{% block content %}
{% load static %}
<script>

function myFunction() {
  if (document.querySelector("input[name='addresses']").value != '') {

    setTimeout(function(){
      $('#test').hide();
      $('#test2').hide();
      $('#test3').hide();
      $('#test4').hide();
      $('#test5').hide();
      $('#gif').show();
    },1500);


}
}

</script>
<script type="text/javascript">//<![CDATA[
function myFunction2() {
	var timerBlock = $('.seconds');
var num = 5; //количество секунд

var index = num;
var timerId = setInterval(function() {
timerBlock.html(--index);
}, 1000);

setTimeout(function() {
clearInterval(timerId);
$('#timerBlock').html('<p>Загружаю результат...</p>')
}, num*1000);
}

	//]]></script>
  <div style="display: none;text-align: center;position: absolute;top: 50%;left: 50%;margin-right: -50%;transform: translate(-50%, -50%)" id="gif">
      <img src="{% static 'img/bit.gif' %}"/>
      <div id="timerBlock">
            <p>Ожидайте <span class="seconds"></span> секунд</p>
        </div>
  </div>
<div class="bg_crypto" id = "test4">
  <nav class="navbar navbar-expand-md navbar-light sticky-top border-bottom shadow-sm">
    <div class="container-fluid">
      <a href="https://brics-russia2020.ru" target="_blank" class="navbar-brad"><img src="static/img/BRICS.png"></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse"
      data-target="#navbarResponsive">
        <span class="navbar-toggler-icon">
          <i class="fas fa-bars" style="color:#fff; font-size:28px;"></i>
        </span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item active">
            <a href="{% url 'rus' %}" class="nav-link text-center text-white">Главная</a>
          </li>
          <li class="nav-item active">
            <a href="{% url 'inform' %}" class="nav-link text-center text-white">О проекте</a>
          </li>
          <li class="nav-item active">
            <a href="{% url 'team' %}" class="nav-link text-center text-white">Команда</a>
          </li>
          <li class="nav-item active">
            <a href="{% url 'contact' %}" class="nav-link text-center text-white">Обратная связь</a>
          </li>

        </ul>
      </div>
    </nav>
  <div clas="container mt-5">
    <div class="row">
      <div class="col-12 text-center mt-4">
        <h1 class="text-white">Баланс криптокошелька</h1>
      </div>
      <div class="main col-10 col-sm-10 col-md-5 col-lg-4 col-xl-4 offset-1">
        <form action="" method="POST">
          <div id = "test3">
          {% csrf_token %}
          {{ form.addresses }}
          {{ form.tokens }}
          </div>

          <input type="submit" name="send" value="Узнать" class="mt-2 btn btn-outline-light btn-lg" onclick="myFunction();myFunction2()" id = "test">

        </form>
      </div>
      <div class="col-10 col-sm-10 col-md-10 col-lg-4 col-xl-5 offset-1 mt-5">
          <div class="d-none d-md-block">
            <div class="text-justify border  pb-3  pt-3 pl-3 pr-3">
              <b class="text-white">Идея модуля:</b> <p3 class="text-white">получение балансов криптокошелька</p3><br>
              <b></b><br>
              <b class="text-white">Описание модуля:</b><p3 class="text-white"> Зачастую у человека или организации, пользующегося криптовалютой не один адрес, а целое множество.
              Такую совокупность адресов и принято называть криптокошельком. Однако, не смотря на распространённость такой практики,
              существует не так много сфота, позволяющих цельно изучить балансы криптокошелька. Данный модуль позволяет гибко задать
              криптокошелёк в виде совокупности адресов аккаунтов и контрактов ERC-20 токенов и увидеть цельные балансы такого криптокошелька.</p3><br>
            </div>

          </div>
      </div>
		</div>
  </div>
  <div class = "container offset-1 col-12">
    <div class = "row">
      <div class="col-10 col-sm-10 col-md-5 col-lg-4 col-xl-4  mt-5">
        <div class = "text-center text-white">
        <h1>Балансы кошелька</h1>
      </div>
      <div class="text-white">
        {% for token, balance in balances.items %}
        <b>{{token}}:</b> {{balance}} <br>
        {% endfor %}

      </div>
    </div>

  </div>
  </div>
</div>





{% endblock %}
